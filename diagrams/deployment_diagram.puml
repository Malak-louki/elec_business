@startuml deployment_diagram_production

title Diagramme de Déploiement - Elec Business (PRODUCTION)

skinparam cloud {
    BackgroundColor LightSkyBlue
}

' ==============================================
' INTERNET
' ==============================================
cloud "Internet" {
    actor "Navigateur" as Browser
}

' ==============================================
' VERCEL CDN
' ==============================================
cloud "**Vercel CDN**\n(Frontend Hosting)" {
    artifact "**Angular 18.2**\n(Static Build)" as Angular {
        note right
          URL : https://elec-business-front.vercel.app

          Déploiement automatique
          depuis GitHub (main branch)
        end note
    }
}

' ==============================================
' RENDER PAAS
' ==============================================
cloud "**Render PaaS**\n(Backend Hosting)" {
    component "**Spring Boot 3.5.6**\n(JAR Executable)" as SpringBoot {
        note right
          URL : https://elec-business-back.onrender.com

          Port : 8080
          Healthcheck : /actuator/health
        end note
    }

    database "**PostgreSQL 16**\n(Managed Database)" as PostgreSQL {
        note right
          Sauvegarde automatique
          Connexion via DATABASE_URL
        end note
    }
}

' ==============================================
' SERVICES EXTERNES
' ==============================================
cloud "Services Externes" {
    component "**Gmail**\n(Email SMTP)" as SMTP
}

' ==============================================
' FLUX
' ==============================================
Browser --> Angular : HTTPS :443\n(Vercel CDN)
Angular --> SpringBoot : REST API :443\n(CORS configuré)
SpringBoot --> PostgreSQL : JDBC :5432
SpringBoot --> SMTP : SMTP :2525

' ==============================================
' CONFIGURATION
' ==============================================
artifact "Variables d'environnement\n(Render Dashboard)" as EnvVars

note right of EnvVars
  JWT_SECRET
  DATABASE_URL (PostgreSQL)
  MAIL_USERNAME / MAIL_PASSWORD
  CORS_ORIGINS=https://elec-business-front.vercel.app
end note

EnvVars .> SpringBoot : Configuration

' ==============================================
' NOTES TECHNIQUES
' ==============================================
note bottom of SpringBoot
  **Build Maven**
  mvn clean install -DskipTests

  **Démarrage automatique**
  java -jar target/elec_business.jar
end note

note bottom of PostgreSQL

  **Dialecte Hibernate**
  org.hibernate.dialect.PostgreSQLDialect
end note

@enduml