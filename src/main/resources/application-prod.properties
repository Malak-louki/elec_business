spring.application.name=elec_business
server.port=${PORT:8080}

# --- Database Configuration ---
# En local : MySQL localhost
# En prod (Render) : DATABASE_URL avec PostgreSQL
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3306/elec_business?useUnicode=true&characterEncoding=utf8&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false}
spring.datasource.username=${DB_USER:dev}
spring.datasource.password=${DB_PASSWORD:1234}
spring.datasource.driver-class-name=${DB_DRIVER:com.mysql.cj.jdbc.Driver}

# --- JPA/Hibernate ---
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=${DB_DIALECT:org.hibernate.dialect.MySQLDialect}

# --- Flyway ---
spring.flyway.enabled=${FLYWAY_ENABLED:false}
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# --- Actuator ---
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true

# --- JWT Authentication ---
app.jwt.secret.key=${JWT_SECRET:changeme}
app.jwt.access.expiration=3600000

# Configuration Gmail SMTP
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# URL de l'application en production
app.url=${APP_URL:https://ton-domaine.com}
# --- Application Base URL ---
app.base-url=${APP_BASE_URL:http://localhost:8080}
app.validation.token-expiration=86400000

# --- CORS Configuration (IMPORTANT pour Angular) ---
cors.allowed.origins=${CORS_ORIGINS:http://localhost:4200}

# --- Logging ---
logging.level.org.springframework.security=${LOG_LEVEL:INFO}
logging.level.com.hb.cda.elec_business=${LOG_LEVEL:INFO}