spring.application.name=elec_business
server.port=${PORT:8080}

# --- Database Configuration ---
# En local : MySQL localhost
# En prod (Render) : DATABASE_URL avec PostgreSQL
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3306/elec_business?useUnicode=true&characterEncoding=utf8&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false}
spring.datasource.username=${DB_USER:dev}
spring.datasource.password=${DB_PASSWORD:1234}
spring.datasource.driver-class-name=${DB_DRIVER:com.mysql.cj.jdbc.Driver}

# --- JPA/Hibernate ---
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=${DB_DIALECT:org.hibernate.dialect.MySQLDialect}

# --- Flyway ---
spring.flyway.enabled=${FLYWAY_ENABLED:false}
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# --- Actuator ---
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true

# --- JWT Authentication ---
app.jwt.secret.key=${JWT_SECRET:changeme}
app.jwt.access.expiration=3600000

# Configuration SMTP (Brevo en production, Mailtrap en dev)
spring.mail.host=${MAIL_HOST:sandbox.smtp.mailtrap.io}
spring.mail.port=${MAIL_PORT:2525}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=${MAIL_STARTTLS_REQUIRED:false}
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_SSL_TRUST:sandbox.smtp.mailtrap.io}

# URL de l'application en production
app.url=${APP_URL:https://elec-business.onrender.com}
# --- Application Base URL ---
app.base-url=${APP_BASE_URL:http://localhost:8080}
# Brevo API Key
brevo.api.key=${BREVO_API_KEY:fake-key-for-dev}
app.validation.token-expiration=86400000

# --- CORS Configuration ---
cors.allowed.origins=${CORS_ORIGINS:http://localhost:4200}

# --- Logging ---
logging.level.org.springframework.security=${LOG_LEVEL:INFO}
logging.level.com.hb.cda.elec_business=${LOG_LEVEL:INFO}